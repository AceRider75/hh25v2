<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-database-compat.js"></script>

</head>
<body>
    <div id="connection-info">
        Online: <span id="online-count">?</span>
        <!-- Ping: <span id="ping-display">N/A</span> -->
    </div>
    <div id="game-id-corner">
        Game ID: <span id="game-id-corner-value">N/A</span>
    </div>

    <div id="main-container">
        <h1 id="game-title">Chess Noir</h1>

        <div id="controls-container">
            <!-- Multiplayer Controls -->
            <div id="multiplayer-controls">
                <input type="text" id="gameIdInput" placeholder="Enter Game ID to Join">
                <div class="button-group">
                    <button id="joinGameBtn">Join Game</button>
                    <button id="createGameBtn">Create New Game</button>
                </div>
                <p id="gameIdDisplay"></p>
            </div>
            <!-- Matchmaking Controls -->
            <div id="matchmaking-controls">
                <button id="findMatchBtn">Find Online Match</button>
                <button id="cancelSearchBtn" style="display: none;">Cancel Search</button>
            </div>
        </div>

        <div id="game-container" style="display: none;">
            <div id="status">Waiting for opponent...</div>
            <div id="board-container">
                 <div id="board"></div>
            </div>
        </div>
    </div>

    <!-- Modals remain outside main containers -->
    <div id="promotionModal" style="display:none;">
        <p>Promote Pawn:</p>
        <div id="promotionOptions">
            <button data-piece="queen" class="promotionChoice white">♕</button>
            <button data-piece="rook" class="promotionChoice white">♖</button>
            <button data-piece="bishop" class="promotionChoice white">♗</button>
            <button data-piece="knight" class="promotionChoice white">♘</button>
            <button data-piece="queen" class="promotionChoice black" style="display:none;">♛</button>
            <button data-piece="rook" class="promotionChoice black" style="display:none;">♜</button>
            <button data-piece="bishop" class="promotionChoice black" style="display:none;">♝</button>
            <button data-piece="knight" class="promotionChoice black" style="display:none;">♞</button>
        </div>
    </div>
    <div id="checkmateModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="checkmateResult"></h2>
            <div id="winningPiece"></div>
            <button id="continueButton">Continue</button>
        </div>
    </div>

    <!-- Load scripts last -->
    <script src="game_logic.js"></script>
    <script src="ui_multiplayer.js"></script>
</body>
</html>
